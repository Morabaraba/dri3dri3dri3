(function(){function a(){$(this);var a=new GoldenLayout(g);a.registerComponent("stockGrid",f);a.registerComponent("example",function(a,d){var b=a.getElement(),e=$('<div id="myGrid"></div>'),f=$('<div id="myGrid2"></div>');b.append(e);b.append(f);a.on("resize",function(){var d=b.height()/2;e.css("height",d);f.css("height",d)});c.utils.delayedOnMount()});a.init();return a}var c=window.app=window.app||{};c.mounts=c.mounts||{};c.mounts.myLayout=function(){var e={ready:!1};$.onmount("#myLayout",function(){e.manager=
a();e.manager.on("initialised",function(){e.ready=!0;console.log("initialised myLayout ready")})},function(){});return e};var g={content:[{type:"row",content:[{type:"component",title:"Example",componentName:"example"},{type:"component",componentName:"stockGrid",title:"FTSE 100 (51-100)",componentState:{symbols:"KGF LAND LGEN LLOY LSE MKS MGGT MNDI MRW NG NXT OML PSON PSN PFC PRU RRS RB REL REX RIO RR RBS RDSA RDSB RMG RSA SAB SGE SBRY SDR SVT SHP SN SMIN SPD SSE STJ STAN SL TSCO TPK TT TLW ULVR UU VOD WEIR WTB WOS".split(" ")}},
{type:"component",componentName:"stockGrid",title:"FTSE 200 (51-100)",componentState:{symbols:"KGF LAND LGEN LLOY LSE MKS MGGT MNDI MRW NG NXT OML PSON PSN PFC PRU RRS RB REL REX RIO RR RBS RDSA RDSB RMG RSA SAB SGE SBRY SDR SVT SHP SN SMIN SPD SSE STJ STAN SL TSCO TPK TT TLW ULVR UU VOD WEIR WTB WOS".split(" ")}}]}]},f=function(a,b){this._container=a;this._state=b;this._grid=null;this._stockDataProvider=new StockDataProvider;this._columns=[{id:"symbol",name:"Symbol",field:"symbol"},{id:"company",
name:"Company",field:"company"},{id:"price",name:"Price",field:"price"},{id:"change",name:"Change",field:"change"},{id:"changeRel",name:"Change %",field:"changeRel"},{id:"volume",name:"Volume",field:"volume"}];this._options={editable:!1,enableAddRow:!1,enableCellNavigation:!0};a.on("open",this._scheduleGridCreation,this)};f.prototype._scheduleGridCreation=function(){var a=setInterval(function(){var b=$("link[rel=stylesheet]"),d;for(d=0;d<b.length;d++)if(null===b[d].sheet)return;clearInterval(a);this._createGrid()}.bind(this),
10)};f.prototype._createGrid=function(){this._grid=new Slick.Grid(this._container.getElement(),this._stockDataProvider.getStocksBySymbol(this._state.symbols),this._columns,this._options);this._container.on("resize",this._resize,this);this._container.on("destroy",this._destroy,this);this._resize()};f.prototype._resize=function(){this._grid.resizeCanvas();this._grid.autosizeColumns()};f.prototype._destroy=function(){this._grid.destroy()}})();(function(){var a=window.app=window.app||{};a.utils=a.utils||{};a.utils.delayedOnMount=function(a){setTimeout(function(){$.onmount()},a)};a.main=function(){a.router=new a.class.AppRouter;Backbone.history.start();$.onmount()}})();(function(){var a=window.app=window.app||{};a.mounts=a.mounts||{};a.mounts.myGrid=function(a,g,f,e){var b={ready:!1};$.onmount("#myGrid",function(){for(var d=$(this),h=0;100>h;h++){var c=a[h]={};c.id=h;c.num=h;for(var k=0;26>k;k++)c[k]=k+h;c.percentComplete=Math.round(100*Math.random());c.start=new Date(Math.round(1E9*Math.random()));c.weekCalendar=[!0,!0,!0,!0,!0,!0,!0,!0,!0,!0,!1,!1,!1,!1]}var l=new Slick.Data.DataView;l.setItems(a);b=_.extend(b,new Slick.Grid("#myGrid",l,g,f));b.setSelectionModel(new Slick.CellSelectionModel);
b.registerPlugin(new Slick.AutoTooltips);b.getCanvasNode().focus();b.registerPlugin(new Slick.CellExternalCopyManager(e));b.onCellChange.subscribe(function(a,d){l.updateItem(d.item.id,d.item)});b.onAddNewRow.subscribe(function(d,c){d=c.item;b.invalidateRow(a.length);a.push(d);b.updateRowCount();b.render()});d.data("grid",b);b.ready=!0;d=new Slick.Grid("#myGrid2",a,g,f);d.setSelectionModel(new Slick.CellSelectionModel);d.registerPlugin(new Slick.CellExternalCopyManager(e))});$.onmount(".slick-header .slick-header-column:first-child",
function(){function a(){alert("filter");return!1}var b=$(this);b.children(":first-child").click(a).html("&#x1f50d;");b.click(a)});return b}})();(function(){var a=window.app=window.app||{};a.class=a.class||{};a.class.AppRouter=Backbone.Router.extend({routes:{"":"index",help:"help","search/:query":"search","search/:query/p:page":"search"},index:function(){console.log('Routing to "app.routes.index"');a.routes.index();console.log('Routed to "app.routes.index"')},help:function(){},search:function(a,g){}})})();(function(){var a=window.app=window.app||{};a.routes=a.routes||{};a.routes.index=function(){var c={commandQueue:[],commandCtr:0,queueAndExecuteCommand:function(a){this.commandQueue[this.commandCtr]=a;this.commandCtr++;a.execute()},undo:function(){if(0!=this.commandCtr){this.commandCtr--;var a=this.commandQueue[this.commandCtr];a&&Slick.GlobalEditorLock.cancelCurrentEdit()&&a.undo()}},redo:function(){if(!(this.commandCtr>=this.commandQueue.length)){var a=this.commandQueue[this.commandCtr];this.commandCtr++;
a&&Slick.GlobalEditorLock.cancelCurrentEdit()&&a.execute()}}};a.undoRedoBuffer=c;$(document).keydown(function(a){90==a.which&&(a.ctrlKey||a.metaKey)&&(a.shiftKey?c.redo():c.undo())});for(var g=0,f=[{id:"selector",name:"",field:"num",width:30}],e=0;26>e;e++)f.push({id:e,name:String.fromCharCode(65+e),field:e,width:60});f[4]={id:"%",name:"% Complete",field:"percentComplete",width:80,resizable:!1,formatter:Slick.Formatters.PercentCompleteBar,editor:Slick.Editors.PercentComplete};f[5]={id:"start",name:"Start",
field:"start",minWidth:60,editor:Slick.Editors.Date};var b=a.mounts.myGrid([],f,{editable:!0,enableAddRow:!0,enableCellNavigation:!0,asyncEditorLoading:!1,autoEdit:!1,dataItemColumnValueExtractor:function(a,b){return a[b.field]},dataItemColumnValueSetter:function(a,b,c){a[b.field]=c}},{clipboardCommandHandler:function(a){c.queueAndExecuteCommand.call(c,a)},readOnlyMode:!1,includeHeaderWhenCopying:!1,newRowCreator:function(a){for(var c=0;c<a;c++){var d={id:"newRow_"+g++};b.getData().addItem(d)}}});
a.mounts.myLayout()}})();
